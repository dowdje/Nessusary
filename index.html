<!DOCTYPE html>
<html>
<head>
  <title></title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<style type="text/css">
  html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: "fira sans",system-ui,-apple-system,roboto,"segoe ui",sans-serif;
    display: flex;
    flex-direction: column;
}
nav{
  background-color: black;
  flex: 1;
}
#logo{
  height: 100px;
  width: 270px;
}
#sub-nav{
  display: flex;
  flex-direction: row;
  width: 100%;
  flex: 5;
}

li{
  list-style: none;
  margin: 0px;
  padding: 0px;
}
ul{
  margin: 0px;
  padding: 0px;
}
button{
  margin: 5px;
  height:40px;
  width: 100px;
  background-color: red;
  border: 3px solid #6fbf4a;
  border-radius: 20px;
  cursor: pointer;
  outline: none;
}
button:hover{
  background-color: pink;
}
button:active{
  border: 3px solid blue;
}
#table-container{
  display: flex;
  background-color: #c0d7db;
  flex: 4;
  height: 100%;
  align-items: center;
  justify-content: center;
  
}

#table{
  display:flex;
  flex-direction: column;
  width: 90%;
  height: 90%;
  border-radius: 2px;
  
}


#table-headers{
  display: flex;
  flex-direction: row;
  border-bottom: 2px solid #96b5ba;
  padding-left: 0px;
  margin-bottom: 0px;
  
}

#table-headers li{
  list-style: none;
  padding: 10px;
  padding-left: 5px;
  color: #00839b;
  font-size: 17px;
  text-align: left;
}



#name-header{
  flex: 6;
}

#hostname-header{
  flex: 3;
}

#port-header{
  flex: 4;
}

#username-header{
  flex: 6;
}

.row{
  display: flex;
  flex-direction: row;
}

.row li{
  padding: 10px;
  padding-left: 5px;
  
}

.index{
  flex: 1;
}

.name{
  flex: 3;
}

.hostname{
  flex: 6;
}

.port{
  flex: 4;
}

.username{
  flex: 6;
}

#search-form{
  flex: 1;
  background-color: #6fbf4a;
  justify-content: center;
}
#search-form form{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
#search-form form input{

}
#submit{
  width: 60px;
  margin-top: 10px;
}
</style>

</head>
<body>
<nav>
<img id='logo' src="https://static.tenable.com/press/logos/products/NessusProfessional-White-RGB-logo.png">
<div id='status'></div>
</nav>
<div id='sub-nav'>
<div id='table-container'>
  <div id='table'>
    <ul id='table-headers'>
    <li id='name-header'>Name</li>
    <li id='hostname-header'>Host</li>         
    <li id='port-header'>Port</li>
    <li id='username-header'>Username</li>
    </ul>
    <ul id='table-body'>

    </ul>
  </div>
</div>
<div id='search-form'>
  <form>
    <label>Host</label>
    <input type="text" name="host">
    <label>Hostname</label>
    <input type="text" name="hostname">
    <label>Port</label>
    <input type="text" name="port">
    <input type="submit" name="submit" id='submit'>
  </form>
  <button type="button" onclick="getData()">GET Data</button>
</div>
</div>

</body>
<script>

function renderHostObjects(hosts){
hosts.forEach((host, idx)=>{
  var $table = $('#table-body');
  var $tableRow = $('<li/>', {class: 'table-row'}).appendTo($table);
  var $row = $('<ul/>', {class: 'row'}).appendTo($tableRow)
  $tableRow.css("order", `${idx + 1}`)
  for(var key in host){
      $row.append($('<li/>',
        {class: key, text: host[key] }))
      }
  zebraStripe($tableRow)
});
};
function getData() {
  var xhttp = new XMLHttpRequest();
  var targetUrl = "https://nessus-e9660.firebaseio.com/configuration.json";
  
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("status").innerHTML = "";
      document.getElementById('table-body').innerHTML = "";

    document.getElementById("table").append("");
      const hosts = JSON.parse(this.responseText);
      renderHostObjects(hosts)
    }else if (this.status){
      document.getElementById("status").innerHTML = "Oops!";
  }else{
      document.getElementById("table-body").innerHTML = "Loading... ";
  }
  };
  
  xhttp.open("GET", targetUrl, true);
  xhttp.send();
}

function zebraStripe(row){
  if(parseInt(row.css("order")) % 2 === 0){
    row.css("backgroundColor", '#6a9096');
  }else{
    row.css("backgroundColor", '#9fc5cc');    
  }
}
</script>
</html>